(this.webpackJsonpjptech=this.webpackJsonpjptech||[]).push([[0],{114:function(e,t,n){e.exports={wrapper:"sidebar_wrapper__15K6k",hidden:"sidebar_hidden__gLZCh",show:"sidebar_show__cmkqc"}},157:function(e,t,n){e.exports={wrapper:"header_wrapper__2Ks2h"}},160:function(e,t,n){e.exports={wrapper:"content_wrapper__3SaDL"}},161:function(e,t,n){e.exports={content_wrapper:"app_content_wrapper__170RZ"}},207:function(e,t,n){},208:function(e,t,n){},24:function(e,t,n){e.exports={wrapper:"table_wrapper__ziDrt",cell:"table_cell__1XAhc",th:"table_th__FPD0d",td:"table_td__27OyA",opt_cell:"table_opt_cell__xQNra"}},247:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(20),s=n.n(r),o=(n(207),n(208),n(13)),i=n(337),l=n(1),u=function(e){var t=c.a.useState(""),n=Object(o.a)(t,2),a=n[0],r=n[1],s=c.a.createContext("");return Object(l.jsxs)(s.Provider,{value:{notify:function(e){r(e),setTimeout((function(){return r("")}),7e3)}},children:[e.children,Object(l.jsx)(i.a,{open:!!a,autoHideDuration:6e3,message:a})]})},j=n(96),d=n(19),b=c.a.createContext({}),h=function(e){var t=e.children,n=c.a.useState(!1),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(l.jsx)(b.Provider,{value:{isSidebarOpen:r,setIsSidebarOpen:s},children:t})},O=n(344),p=n(345),x=n(342),f=n(117),m=n(156),v=n.n(m),g=n(82),C=n(111),D=n(153),w=n.n(D).a.create({baseURL:"https://jpcms.herokuapp.com/"});w.interceptors.request.use((function(e){var t=localStorage.getItem("JPtechSolutionAccessToken");return t&&(e.headers.authorization="Bearer ".concat(t)),e})),w.interceptors.response.use((function(e){var t=e.headers.authorization;return t&&localStorage.setItem("JPtechSolutionAccessToken",t.split(" ")[1]),e}));var S=w,_=c.a.createContext(null),N=function(e){var t=c.a.useState(null),n=Object(o.a)(t,2),a=n[0],r=n[1],s=c.a.useState(!0),i=Object(o.a)(s,2),u=i[0],j=i[1];return c.a.useEffect((function(){var e=localStorage.getItem("JPtechSolutionAccessToken");e?S.get("/user/login",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return!e.data.error&&r(e.data)})).finally((function(){return j(!1)})):j(!1)}),[]),u?Object(l.jsx)("h1",{children:"Loading User"}):Object(l.jsx)(_.Provider,{value:{user:a,setUser:r,isUserLoading:u,setIsUserLoading:j},children:e.children})},Y=n(155),M=n.n(Y),k=n(165),y=n(334),J=["children","className"],L=function(e){e.children,e.className;var t=Object(C.a)(e,J),n=c.a.useContext(_),a=n.user,r=n.setUser,s=Object(d.f)(),i=c.a.useState(null),u=Object(o.a)(i,2),j=u[0],b=u[1],h=Boolean(j),O=function(){return b(null)};return Object(l.jsxs)("div",Object(g.a)(Object(g.a)({},t),{},{children:[Object(l.jsx)(x.a,{onClick:function(e){if(!a)return s.push("/login");b(e.currentTarget)},children:Object(l.jsx)(M.a,{})}),Object(l.jsxs)(k.a,{anchorEl:j,open:h,onClose:O,children:[a&&Object(l.jsx)(y.a,{onClick:O,children:a.username}),Object(l.jsx)(y.a,{onClick:function(){r(null),localStorage.removeItem("JPtechSolutionAccessToken")},children:"Logout"})]})]}))},P=function(){var e=c.a.useContext(b),t=e.setIsSidebarOpen,n=e.isSidebarOpen;return Object(l.jsx)(O.a,{position:"static",color:"primary",children:Object(l.jsxs)(p.a,{children:[Object(l.jsx)(x.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return t(!n)},children:Object(l.jsx)(v.a,{})}),Object(l.jsx)(f.a,{variant:"h6",children:"JPCMS"}),Object(l.jsx)(L,{style:{marginLeft:"auto"}})]})})},z=n(114),I=n.n(z),U=n(343),E=n(332),R=n(322),A=n(323),F=function(){var e=c.a.useContext(b).isSidebarOpen;return Object(l.jsx)("div",{className:"".concat(I.a.wrapper," ").concat(e?I.a.show:I.a.hidden),children:Object(l.jsx)(U.a,{children:Object(l.jsx)(E.a,{disablePadding:!0,children:Object(l.jsx)(R.a,{children:Object(l.jsx)(A.a,{primary:"Jobs"})})})})})},T=n(71),B=n.n(T),W=n(115),V=n(335),q=n(349),K=n(336),Z=n(329),H=n(350),Q=n(338),X=n(23),G=n.n(X),$=function(e){var t=e.open,n=e.handleClose,a=e.createJob,r=e.selected,s=e.updateJob,i=e.isUpdate,u=c.a.useState(""),j=Object(o.a)(u,2),d=j[0],b=j[1],h=c.a.useState(""),O=Object(o.a)(h,2),p=O[0],x=O[1],f=c.a.useState(""),m=Object(o.a)(f,2),v=m[0],g=m[1],C=c.a.useState(""),D=Object(o.a)(C,2),w=D[0],S=D[1],_=c.a.useState(""),N=Object(o.a)(_,2),Y=N[0],M=N[1],k=c.a.useState(!1),J=Object(o.a)(k,2),L=J[0],P=J[1],z=c.a.useState(""),I=Object(o.a)(z,2),U=I[0],E=I[1],R=c.a.useState("".concat(G()().format("YYYY"),"-").concat(G()().format("MM"),"-").concat(G()().format("DD"))),A=Object(o.a)(R,2),F=A[0],T=A[1],B=c.a.useState("".concat(G()().format("YYYY"),"-").concat(G()().format("MM"),"-").concat(G()().format("DD"))),W=Object(o.a)(B,2),X=W[0],$=W[1],ee=c.a.useState(""),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],ce=function(){b(""),x(""),g(""),S(""),M(""),P(""),E(""),T("".concat(G()().format("YYYY"),"-").concat(G()().format("MM"),"-").concat(G()().format("DD"))),$("".concat(G()().format("YYYY"),"-").concat(G()().format("MM"),"-").concat(G()().format("DD"))),ae("")},re=function(){i?oe().then((function(){return ce()})):se().then((function(){return ce()}))},se=function(){return a({customerName:d,serialNumber:p,model:v,issues:w,brand:Y,status:L,amount:U,receivedDate:F,returnedDate:X,detailedDescription:ne})},oe=function(){return s({id:r._id,customerName:d,serialNumber:p,model:v,issues:w,brand:Y,status:L,amount:U,receivedDate:F,returnedDate:X,detailedDescription:ne})};return c.a.useEffect((function(){i&&r&&(b(r.customerName),x(r.serialNumber),g(r.model),S(r.issues),M(r.brand),P(r.status),E(r.amount),T("".concat(G()(r.receivedDate).format("YYYY"),"-").concat(G()(r.receivedDate).format("MM"),"-").concat(G()(r.receivedDate).format("DD"))),$("".concat(G()(r.returnedDate).format("YYYY"),"-").concat(G()(r.returnedDate).format("MM"),"-").concat(G()(r.returnedDate).format("DD"))),ae(r.detailedDescription))}),[i]),Object(l.jsx)(Q.a,{open:t,onClose:function(){ce(),n()},children:Object(l.jsxs)("div",{className:"add-new-service-wrapper",children:[Object(l.jsx)(V.a,{size:"small",value:d,onChange:function(e){return b(e.target.value)},label:"Customer Name",variant:"outlined"}),Object(l.jsx)(V.a,{size:"small",value:p,onChange:function(e){return x(e.target.value)},label:"Serial Number",variant:"outlined",type:"number"}),Object(l.jsx)(V.a,{size:"small",value:v,onChange:function(e){return g(e.target.value)},label:"Model",variant:"outlined"}),Object(l.jsx)(V.a,{size:"small",value:w,onChange:function(e){return S(e.target.value)},label:"Issues",variant:"outlined"}),Object(l.jsx)(V.a,{size:"small",value:Y,onChange:function(e){return M(e.target.value)},label:"Brand",variant:"outlined"}),Object(l.jsxs)(q.a,{variant:"outlined",size:"small",children:[Object(l.jsx)(K.a,{id:"demo-simple-select-outlined-label",children:"Status"}),Object(l.jsxs)(Z.a,{value:!0===L?"resolved":"returned",onChange:function(e){return P("resolved"===e.target.value)},children:[Object(l.jsx)(y.a,{value:"resolved",children:"Resolved"}),Object(l.jsx)(y.a,{value:"returned",children:"Return"})]})]}),Object(l.jsx)(V.a,{size:"small",value:U,onChange:function(e){return E(e.target.value)},label:"Amount",variant:"outlined"}),Object(l.jsx)(V.a,{id:"date",label:"Received Date",type:"date",defaultValue:F,InputLabelProps:{shrink:!0},onChange:function(e){return T(e.target.value)}}),Object(l.jsx)(V.a,{id:"date",label:"Returned Date",type:"date",defaultValue:X,InputLabelProps:{shrink:!0},onChange:function(e){return $(e.target.value)}}),Object(l.jsx)(V.a,{value:ne,onChange:function(e){return ae(e.target.value)},size:"small",label:"Detailed Description",multiline:!0,variant:"outlined"}),i?Object(l.jsx)(H.a,{onClick:re,children:"Update"}):Object(l.jsx)(H.a,{onClick:re,children:"Add New Job"})]})})},ee=n(351),te=n(158),ne=n.n(te),ae=n(157),ce=n.n(ae),re=function(e){var t=e.addNew;return Object(l.jsxs)(ee.a,{display:"flex",className:ce.a.wrapper,justifyContent:"space-between",alignItems:"center",children:[Object(l.jsx)("h3",{children:"Jobs"}),Object(l.jsx)(x.a,{onClick:t,color:"primary","aria-label":"upload picture",component:"span",children:Object(l.jsx)(ne.a,{})})]})},se=["open","handleClose","job"],oe=function(e){var t=e.open,n=e.handleClose,a=e.job;Object(C.a)(e,se);return a?Object(l.jsx)(Q.a,{open:t,onClose:function(){n()},children:Object(l.jsxs)(ee.a,{padding:"30px",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Customer name"}),Object(l.jsx)("p",{style:{fontWeight:500},children:a.customerName})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Model Number"}),Object(l.jsx)("p",{style:{fontWeight:500},children:a.model})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Received Date"}),Object(l.jsx)("p",{style:{fontWeight:500},children:G()(a.receivedDate).format("Do MMM YY")})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Returned Date"}),Object(l.jsx)("p",{style:{fontWeight:500},children:G()(a.returnedDate).format("Do MMM YY")})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Amount"}),Object(l.jsx)("p",{style:{fontWeight:500},children:a.amount})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Description"}),Object(l.jsx)("p",{style:{fontWeight:500},children:a.detailedDescription})]})]})}):null},ie=n(353),le=n(357),ue=n(356),je=n(354),de=n(352),be=n(355),he=n(24),Oe=n.n(he),pe=n(159),xe=n.n(pe),fe=c.a.createContext(null),me=function(e){var t=e.children,n=c.a.useState(null),a=Object(o.a)(n,2),r=a[0],s=a[1],i=function(e){s(window.innerWidth)};return c.a.useEffect((function(){return window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}}),[]),Object(l.jsx)(fe.Provider,{value:{width:r},children:t})},ve=function(e){var t=c.a.useContext(fe).width,n=c.a.useState(null),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(de.a,{className:"".concat(Oe.a.wrapper),children:Object(l.jsxs)(ie.a,{children:[Object(l.jsx)(je.a,{children:Object(l.jsxs)(be.a,{children:[Object(l.jsx)(ue.a,{className:"".concat(Oe.a.cell," ").concat(Oe.a.th),children:"Customer Name"}),t>600&&Object(l.jsx)(ue.a,{className:"".concat(Oe.a.cell," ").concat(Oe.a.th),children:"Serial Number"}),t>600&&Object(l.jsx)(ue.a,{className:"".concat(Oe.a.cell," ").concat(Oe.a.th),children:"Rec Date"}),t>600&&Object(l.jsx)(ue.a,{className:"".concat(Oe.a.cell," ").concat(Oe.a.th),children:"Ret Date"}),t>600&&Object(l.jsx)(ue.a,{className:"".concat(Oe.a.cell," ").concat(Oe.a.th),children:"Amount"}),Object(l.jsx)(ue.a,{className:"".concat(Oe.a.cell," ").concat(Oe.a.th)})]})}),Object(l.jsx)(le.a,{children:e.jobs.map((function(n){return Object(l.jsxs)(be.a,{children:[Object(l.jsx)(ue.a,{className:Oe.a.td,component:"th",scope:"row",children:n.customerName}),t>600&&Object(l.jsx)(ue.a,{className:"".concat(Oe.a.cell," ").concat(Oe.a.th),children:n.serialNumber}),t>600&&Object(l.jsx)(ue.a,{className:"".concat(Oe.a.cell," ").concat(Oe.a.th),children:G()(n.receivedDate).format("Do MMM YY")}),t>600&&Object(l.jsx)(ue.a,{className:"".concat(Oe.a.cell," ").concat(Oe.a.th),children:G()(n.returnedDate).format("Do MMM YY")}),t>600&&Object(l.jsx)(ue.a,{className:"".concat(Oe.a.cell," ").concat(Oe.a.th),children:n.amount}),Object(l.jsx)(ue.a,{className:"".concat(Oe.a.td," ").concat(Oe.a.opt_cell),component:"th",scope:"row",children:Object(l.jsx)(xe.a,{onClick:function(t){return function(t,n){s(t.target),e.selected.current=n}(t,n)}})})]},n._id)}))})]})}),Object(l.jsxs)(k.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){return s(null)},children:[Object(l.jsx)(y.a,{onClick:function(){e.handleViewJob(),s(null)},children:"View"}),Object(l.jsx)(y.a,{onClick:function(){e.handleUpdate(),s(null)},children:"Update"}),Object(l.jsx)(y.a,{onClick:function(){e.handleDelete(),s(null)},children:"Delete"})]})]})},ge=function(){var e=c.a.useState(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],r=c.a.useState(!1),s=Object(o.a)(r,2),i=s[0],u=s[1],j=c.a.useState(!1),d=Object(o.a)(j,2),b=d[0],h=d[1],O=c.a.useState([]),p=Object(o.a)(O,2),x=p[0],f=p[1],m=function(){u(!1),n&&a(!1)},v=function(){return u(!0)},C=c.a.useRef(null),D=function(){var e=Object(W.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/service",Object(g.a)({},t));case 2:if((n=e.sent).error){e.next=9;break}return m(),e.next=7,S.get("/service");case 7:a=e.sent,f(a.data.result);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(W.a)(B.a.mark((function e(t){var n,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.put("/service",Object(g.a)({},t));case 2:if((n=e.sent).error){e.next=10;break}return m(),e.next=7,S.get("/service");case 7:c=e.sent,f(c.data.result),C.current=null;case 10:return a(!1),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(W.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.delete("/service/".concat(C.current._id));case 2:return e.next=4,S.get("/service");case 4:t=e.sent,f(t.data.result);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.useEffect((function(){S.get("/service").then((function(e){f(e.data.result)}))}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(re,{addNew:v}),Object(l.jsx)(ve,{jobs:x,selected:C,handleViewJob:function(){h(!0)},handleUpdate:function(){v(),a(!0)},handleDelete:function(){_()}}),Object(l.jsx)($,{open:i,handleClose:m,createJob:D,updateJob:w,selected:C.current,isUpdate:n}),Object(l.jsx)(oe,{open:b,handleClose:function(){h(!1),C.current=null},job:C.current})]})},Ce=n(160),De=n.n(Ce),we=function(){return Object(l.jsx)("div",{className:De.a.wrapper,children:Object(l.jsx)(d.c,{children:Object(l.jsx)(d.a,{exact:!0,path:"/",component:ge})})})},Se=n(161),_e=n.n(Se),Ne=function(){var e=c.a.useContext(_).user,t=Object(d.f)();return c.a.useEffect((function(){e||t.push("/login")}),[t,e]),Object(l.jsxs)(h,{children:[Object(l.jsx)(P,{}),Object(l.jsxs)("div",{className:"".concat(_e.a.content_wrapper),children:[Object(l.jsx)(F,{}),Object(l.jsx)(we,{})]})]})},Ye=n(327),Me=n(312),ke=n(325),ye=n(330),Je=function(){var e=Object(d.f)(),t=c.a.useState(""),n=Object(o.a)(t,2),a=n[0],r=n[1],s=c.a.useState(""),i=Object(o.a)(s,2),u=i[0],j=i[1],b=c.a.useContext(_),h=b.user,O=b.setUser;return c.a.useEffect((function(){h&&e.push("/")})),Object(l.jsx)(Ye.a,{padding:10,children:Object(l.jsx)(Me.a,{children:Object(l.jsxs)(Ye.a,{display:"flex",flexDirection:"column",padding:10,children:[Object(l.jsx)(ke.a,{label:"username",value:a,variant:"outlined",onChange:function(e){return r(e.target.value)}}),Object(l.jsx)(ke.a,{type:"password",label:"password",value:u,variant:"outlined",onChange:function(e){return j(e.target.value)}}),Object(l.jsx)(ye.a,{onClick:function(){S.post("/user/login",{username:a,password:u}).then((function(e){console.log(e),e.data.error||O(e.data.user)}))},children:"Login"})]})})})},Le=function(){return Object(l.jsxs)(d.c,{children:[Object(l.jsx)(d.a,{exact:!0,path:"/login",component:Je}),Object(l.jsx)(d.a,{exact:!0,path:"/",component:Ne})]})},Pe=n(333),ze=n(324),Ie=n(164),Ue=Object(Ie.a)({palette:{primary:{main:"#0052cc"},secondary:{main:"#edf2ff"}}}),Ee=function(e){var t=e.children;return Object(l.jsxs)(Pe.a,{theme:Ue,children:[Object(l.jsx)(ze.a,{}),t]})},Re=n(132),Ae=function(e){var t=e.children;return Object(l.jsxs)(Re.b,{children:[Object(l.jsx)(Re.a,{children:Object(l.jsx)("title",{children:"CMS"})}),t]})};var Fe=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(me,{children:[Object(l.jsx)(Ae,{}),Object(l.jsx)(Ee,{children:Object(l.jsx)(N,{children:Object(l.jsx)(j.a,{children:Object(l.jsx)(u,{children:Object(l.jsx)(Le,{})})})})})]})})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,360)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(Fe,{})}),document.getElementById("root")),Te()}},[[247,1,2]]]);
//# sourceMappingURL=main.ac4838e2.chunk.js.map